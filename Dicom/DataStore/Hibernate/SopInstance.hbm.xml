<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="ClearCanvas.Dicom.DataStore" namespace="ClearCanvas.Dicom.DataStore">
  <class name="SopInstance" table="SopInstance_" lazy="false">
    <id name="Oid" column="Oid_" type="Guid">
      <generator class="guid.comb">
      </generator>
    </id>
    <property name="TransferSyntaxUid" column="TransferSyntaxUid_" type="string" length="64" />
    <property name="InstanceNumber" column="InstanceNumber_" type="Int32" />
    <property name="SopInstanceUid" column="SopInstanceUid_" type="string" length="64" not-null="true" unique="true" />
    <property name="SopClassUid" column="SopClassUid_" type="string" length="64" />
    <property name="SpecificCharacterSet" column="SpecificCharacterSet_" type="string" length="64" />
    <component name="LocationUri" class="DicomUri">
      <property name="InternalUri" column="LocationUri_" type="string" length="1024" />
    </component>
    <many-to-one name="Series" class="ClearCanvas.Dicom.DataStore.Series, ClearCanvas.Dicom.DataStore" column="SeriesOid_" not-null="true" fetch="select"/>
    <joined-subclass name="ImageSopInstance" table="ImageSopInstance_" lazy="false" >
      <key column="Oid_" />
      <property name="AcquisitionNumber" column="AcquisitionNumber_" type="Int32" />
      <property name="AcquisitionDateRaw" column="AcquisitionDateRaw_" type="string" length="26" />
      <property name="AcquisitionTimeRaw" column="AcquisitionTimeRaw_" type="string" length="16" />
      <property name="AcquisitionDateTimeRaw" column="AcquisitionDateTimeRaw_" type="string" length="26" />
      <property name="SliceThickness" column="SliceThickness_" type="Double" />
      <property name="SpacingBetweenSlices" column="SpacingBetweenSlices_" type="Double" />
      <property name="NumberOfFrames" column="NumberOfFrames_" type="Int32" />
      <property name="SamplesPerPixel" column="SamplesPerPixel_" type="Int32" />
      <property name="BitsStored" column="BitsStored_" type="Int32" />
      <property name="RescaleSlope" column="RescaleSlope_" type="Double" />
      <property name="Rows" column="Rows_" type="Int32" />
      <property name="Columns" column="Columns_" type="Int32" />
      <property name="PlanarConfiguration" column="PlanarConfiguration_" type="Int32" />
      <property name="RescaleIntercept" column="RescaleIntercept_" type="Double" />
      <property name="PixelRepresentation" column="PixelRepresentation_" type="Int32" />
      <property name="BitsAllocated" column="BitsAllocated_" type="Int32" />
      <property name="HighBit" column="HighBit_" type="Int32" />
      <property name="PhotometricInterpretation" column="PhotometricInterpretation_" />
      <component name="PixelSpacing" class="ClearCanvas.Dicom.PixelSpacing, ClearCanvas.Dicom">
        <property name="Row" column="PixelSpacingRow_" type="Double"/>
        <property name="Column" column="PixelSpacingColumn_" type="Double"/>
      </component>
      <component name="ImagerPixelSpacing" class="ClearCanvas.Dicom.PixelSpacing, ClearCanvas.Dicom">
        <property name="Row" column="ImagerPixelSpacingRow_" type="Double"/>
        <property name="Column" column="ImagerPixelSpacingColumn_" type="Double"/>
      </component>
      <component name="PixelAspectRatio" class="ClearCanvas.Dicom.PixelAspectRatio, ClearCanvas.Dicom">
        <property name="Row" column="PixelAspectRatioRow_" type="Double"/>
        <property name="Column" column="PixelAspectRatioColumn_" type="Double"/>
      </component>
      <component name="ImageOrientationPatient" class="ClearCanvas.Dicom.ImageOrientationPatient, ClearCanvas.Dicom">
        <property name="RowX" column="ImageOrientationPatientRowX_" type="Double"/>
        <property name="RowY" column="ImageOrientationPatientRowY_" type="Double"/>
        <property name="RowZ" column="ImageOrientationPatientRowZ_" type="Double"/>
        <property name="ColumnX" column="ImageOrientationPatientColumnX_" type="Double"/>
        <property name="ColumnY" column="ImageOrientationPatientColumnY_" type="Double"/>
        <property name="ColumnZ" column="ImageOrientationPatientColumnZ_" type="Double"/>
      </component>
      <component name="ImagePositionPatient" class="ClearCanvas.Dicom.ImagePositionPatient, ClearCanvas.Dicom">
        <property name="X" column="ImagePositionPatientX_" type="Double"/>
        <property name="Y" column="ImagePositionPatientY_" type="Double"/>
        <property name="Z" column="ImagePositionPatientZ_" type="Double"/>
      </component>
      <list name="WindowValues" table="WindowValues_" lazy="false" access="nosetter.camelcase-underscore">
        <key column="Oid_" />
        <index column="VM_" /> 
        <composite-element class="ClearCanvas.Dicom.Window, ClearCanvas.Dicom">
          <property name="Width" column="Width_" type="Double" />
          <property name="Center" column="Center_" type="Double" />
        </composite-element>
      </list>
    </joined-subclass>
  </class>
</hibernate-mapping>
