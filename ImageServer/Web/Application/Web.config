<?xml version="1.0"?>
<configuration>
	<configSections>
		<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
			<sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
				<section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
				<sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
					<section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="Everywhere"/>
					<section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
					<section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
				</sectionGroup>
			</sectionGroup>
		</sectionGroup>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net-net-1.0"/>
		<sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
			<section name="ClearCanvas.ImageServer.Web.Application.Pages.Queues.WorkQueue.WorkQueueSettings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
			<section name="ClearCanvas.ImageServer.Web.Application.WebServer" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
			<section name="ClearCanvas.ImageServer.Web.Common.UISettings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
		</sectionGroup>
	</configSections>
	<connectionStrings>
		<add name="ImageServerConnectString" connectionString="Data Source=127.0.0.1;User ID=sa;Password=clearcanvas;Initial Catalog=ImageServer" providerName="System.Data.SqlClient"/>
	</connectionStrings>
	<applicationSettings>
		<ClearCanvas.ImageServer.Web.Application.Pages.Queues.WorkQueue.WorkQueueSettings>
			<setting name="WorkQueueQueryDelay" serializeAs="String">
				<value>10000</value>
			</setting>
			<setting name="WorkQueueMaxFailureCount" serializeAs="String">
				<value>3</value>
			</setting>
			<setting name="WorkQueueFailureDelayMinutes" serializeAs="String">
				<value>3</value>
			</setting>
			<setting name="WorkQueueProcessDelaySeconds" serializeAs="String">
				<value>30</value>
			</setting>
			<setting name="WorkQueueExpireDelaySeconds" serializeAs="String">
				<value>300</value>
			</setting>
			<setting name="NormalRefreshIntervalSeconds" serializeAs="String">
				<value>20</value>
			</setting>
			<setting name="FastRefreshIntervalSeconds" serializeAs="String">
				<value>10</value>
			</setting>
		</ClearCanvas.ImageServer.Web.Application.Pages.Queues.WorkQueue.WorkQueueSettings>
		<ClearCanvas.ImageServer.Web.Common.UISettings>
			<setting name="DateFormat" serializeAs="String">
				<value>MMM dd, yyyy</value>
			</setting>
			<setting name="TimeFormat" serializeAs="String">
				<value>hh:mm:ss tt</value>
			</setting>
			<setting name="DateTimeFormat" serializeAs="String">
				<value>MMM dd, yyyy hh:mm:ss tt</value>
			</setting>
			<setting name="NameFormat" serializeAs="String">
				<value>{Last}, {First} {Middle}</value>
			</setting>
		</ClearCanvas.ImageServer.Web.Common.UISettings>
	</applicationSettings>
  <appSettings>
    <add key="CachePages" value="false" />
  </appSettings>
	<log4net>
		<!-- Define some output appenders -->
		<appender name="RollingLogFileAppender" type="ClearCanvas.log4net.RollingFileAppender, ClearCanvas.log4net">
			<param name="File" value=".\logs\ClearCanvas.ImageServer.log"/>
			<param name="AppendToFile" value="true"/>
			<param name="MaxSizeRollBackups" value="5"/>
			<param name="MaximumFileSize" value="1024KB"/>
			<param name="RollingStyle" value="Size"/>
			<param name="StaticLogFileName" value="false"/>
			<layout type="log4net.Layout.PatternLayout">
				<param name="ConversionPattern" value="%d [%t] %-5p - %m%n"/>
			</layout>
			<lockingModel type="ClearCanvas.log4net.FileAppender+MutexLock, ClearCanvas.log4net"/>
		</appender>
		<!-- Setup the root category, add the appenders and set the default level -->
		<root>
			<level value="ALL"/>
			<appender-ref ref="RollingLogFileAppender"/>
		</root>
		<logger name="ClearCanvas.Common.Platform">
			<level value="DEBUG"/>
		</logger>
	</log4net>
	<system.web>
		<!-- 
			If the filesystem path is a shared folder on a remote machine, the following entry should be set for the path validation.
					  
				<identity impersonate="true" userName="DomainUserID" password="password"/>
		
			Also make sure DomainUserID must have access permission to the shared folder.					 
		-->
		<pages enableEventValidation="false">
			<controls>
				<add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" tagPrefix="asp" namespace="System.Web.UI"/>
				<add assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagPrefix="aspAjax"/>
				<add assembly="ClearCanvas.ImageServer.Web.Common" namespace="ClearCanvas.ImageServer.Web.Common.WebControls.UI" tagPrefix="ccUI"/>
				<add assembly="ClearCanvas.ImageServer.Web.Common" namespace="ClearCanvas.ImageServer.Web.Common.WebControls.Validators" tagPrefix="ccValidator"/>
				<!--        <add assembly="Validators" namespace="Sample.Web.UI.Compatibility" tagPrefix="ccValidator" /> -->
				<add src="~/Controls/ModalDialog.ascx" tagName="ModalDialog" tagPrefix="ccAsp"/>
				<add src="~/Controls/MessageBox.ascx" tagName="MessageBox" tagPrefix="ccAsp"/>
				<add src="~/Controls/SectionPanel.ascx" tagName="SectionPanel" tagPrefix="ccAsp"/>
				<add src="~/Controls/GridPager.ascx" tagName="GridPager" tagPrefix="ccAsp"/>
				<add src="~/Controls/ServerPartitionTabs.ascx" tagName="ServerPartitionTabs" tagPrefix="ccAsp"/>
				<add src="~/Controls/InvalidInputIndicator.ascx" tagName="InvalidInputIndicator" tagPrefix="ccAsp"/>
				<add src="~/Controls/TimedDialog.ascx" tagName="TimedDialog" tagPrefix="ccAsp"/>
				<add src="~/Controls/CheckJavascript.ascx" tagName="CheckJavascript" tagPrefix="ccAsp"/>
				<add src="~/Controls/GridView.ascx" tagName="GridView" tagPrefix="ccAsp"/>
				<add src="~/Controls/NameComponentPanel.ascx" tagName="NameComponentPanel" tagPrefix="ccAsp"/>
				<add src="~/Controls/PersonNameInputPanel.ascx" tagName="PersonNameInputPanel" tagPrefix="ccAsp"/>
        <add src="~/Controls/EmptySearchResultsMessage.ascx" tagName="EmptySearchResultsMessage" tagPrefix="ccAsp"/>
			</controls>
			<tagMapping>
				<add tagType="System.Web.UI.WebControls.CompareValidator" mappedTagType="Sample.Web.UI.Compatibility.CompareValidator, Validators, Version=1.0.0.0"/>
				<add tagType="System.Web.UI.WebControls.CustomValidator" mappedTagType="Sample.Web.UI.Compatibility.CustomValidator, Validators, Version=1.0.0.0"/>
				<add tagType="System.Web.UI.WebControls.RangeValidator" mappedTagType="Sample.Web.UI.Compatibility.RangeValidator, Validators, Version=1.0.0.0"/>
				<add tagType="System.Web.UI.WebControls.RegularExpressionValidator" mappedTagType="Sample.Web.UI.Compatibility.RegularExpressionValidator, Validators, Version=1.0.0.0"/>
				<add tagType="System.Web.UI.WebControls.RequiredFieldValidator" mappedTagType="Sample.Web.UI.Compatibility.RequiredFieldValidator, Validators, Version=1.0.0.0"/>
				<add tagType="System.Web.UI.WebControls.ValidationSummary" mappedTagType="Sample.Web.UI.Compatibility.ValidationSummary, Validators, Version=1.0.0.0"/>
			</tagMapping>
		</pages>
		<!--
          Set compilation debug="true" to insert debugging
          symbols into the compiled page. Because this
          affects performance, set this value to true only
          during development.
    -->
		<compilation debug="true">
			<assemblies>
				<add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
				<add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.Web.Extensions.Design, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
				<add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="Microsoft.JScript, Version=8.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="System.Web.Services, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.DirectoryServices.Protocols, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.EnterpriseServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
				<add assembly="System.Web.RegularExpressions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
			</assemblies>
		</compilation>
		<httpHandlers>
			<remove verb="*" path="*.asmx"/>
			<add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
		</httpHandlers>
		<httpModules>
			<add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<add name="ErrorModule" type="ClearCanvas.ImageServer.Web.Common.Modules.ErrorModule, ClearCanvas.ImageServer.Web.Common"/>
		</httpModules>
	</system.web>
	<system.webServer>
		<validation validateIntegratedModeConfiguration="false"/>
		<modules>
			<add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
		</modules>
		<handlers>
			<remove name="WebServiceHandlerFactory-Integrated"/>
			<add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
		</handlers>
	</system.webServer>
	<system.serviceModel>
		<bindings>
			<wsHttpBinding>
				<binding name="WSHttpBinding_IFilesystemService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
					<readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
					<reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
					<security mode="Message">
						<transport clientCredentialType="Windows" proxyCredentialType="None" realm=""/>
						<message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true"/>
					</security>
				</binding>
			</wsHttpBinding>
		</bindings>
		<client>
			<endpoint address="http://localhost:50221/FilesystemService/FilesystemService" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IFilesystemService" contract="ClearCanvas.ImageServer.Web.Common.FilesystemServiceProxy.IFilesystemService" name="WSHttpBinding_IFilesystemService">
			</endpoint>
			<endpoint address="http://localhost:50221/FilesystemService/FilesystemService" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IFilesystemService" contract="ClearCanvas.ImageServer.Web.Application.FilesystemServiceProxy.IFilesystemService" name="WSHttpBinding_IFilesystemService">
			</endpoint>
		</client>
	</system.serviceModel>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="ClearCanvas.ImageServer.Rules" culture="neutral"/>
				<codeBase href="plugins\ClearCanvas.ImageServer.Rules.dll"/>
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
</configuration>
